import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// æ”¯æŒçš„è¯­è¨€ï¼šä¸­æ–‡ã€è‹±æ–‡ã€æ³•è¯­
const resources = {
  en: {
    translation: {
      // App Header
      'app.title': 'PDF Security Editor',
      'app.subtitle': 'Drag to select sensitive areas',
      'app.back': 'Back',
      
      // File Upload
      'upload.title': 'Upload PDF File',
      'upload.description': 'Securely hide sensitive information, all processing is completed locally in your browser',
      'upload.requirements.title': 'File Requirements and Usage Flow',
      'upload.fileRequirements.title': 'ğŸ“„ File Requirements',
      'upload.fileRequirements.format': 'Only PDF format files supported',
      'upload.fileRequirements.size': 'File size no more than 50MB',
      'upload.fileRequirements.password': 'Password-protected files not supported',
      'upload.fileRequirements.fileName': 'File names should use regular characters',
      'upload.usageFlow.title': 'ğŸ”„ Usage Flow',
      'upload.usageFlow.step1': 'Upload PDF file (drag or click to select)',
      'upload.usageFlow.step2': 'Drag mouse to select sensitive information areas',
      'upload.usageFlow.step3': 'Preview effect, confirm redacted areas',
      'upload.usageFlow.step4': 'Select processing method, generate secure PDF',
      
      // FileUploader component
      'fileUploader.validation.formatError': 'Only PDF format files are supported',
      'fileUploader.validation.sizeError': 'File size exceeds 50MB limit, please select a smaller PDF file',
      'fileUploader.validation.nameError': 'File name contains special characters, please rename and try again',
      'fileUploader.validation.failed': 'File Validation Failed',
      'fileUploader.validation.selectValid': 'Please select a valid PDF file',
      'fileUploader.loading.title': 'Loading PDF...',
      'fileUploader.loading.description': 'Please wait, parsing file',
      'fileUploader.remove': 'Remove file',
      'fileUploader.clickToReselect': 'Click to reselect',
      'fileUploader.dragDrop.title': 'Drag PDF file here',
      'fileUploader.dragDrop.subtitle': 'or',
      'fileUploader.dragDrop.clickToSelect': 'click to select file',
      'fileUploader.maxSize': 'Max 50MB',
      'fileUploader.pdfOnly': 'PDF only',
      'fileUploader.localProcessing': 'Local processing',
      'fileUploader.privacy.description': 'All file processing is completed locally on your device, ensuring privacy and security. We do not upload or store your files.',
      
      // Toolbar component
      'toolbar.title': 'Edit Settings',
      'toolbar.subtitle': 'Select processing method and generate secure PDF',
      'toolbar.methodTitle': 'Processing Method',
      'toolbar.methods.canvas': 'Canvas Screenshot',
      'toolbar.methods.canvasDesc': 'Convert to image, highest security, completely unrecoverable',
      'toolbar.methods.pixelate': 'Pixelate Processing',
      'toolbar.methods.pixelateDesc': 'Pixelated blur, maintain PDF structure, fast processing',
      'toolbar.recommended': 'Recommended',
      'toolbar.markColor': 'Mark Color',
      'toolbar.colorDescription': 'Select display color for marked areas, convenient for distinguishing different types of sensitive information',
      'toolbar.colors.red': 'Red',
      'toolbar.colors.blue': 'Blue', 
      'toolbar.colors.green': 'Green',
      'toolbar.colors.yellow': 'Yellow',
      'toolbar.colors.purple': 'Purple',
      'toolbar.undo': 'Undo',
      'toolbar.redo': 'Redo',
      'toolbar.undoTooltip': 'Undo (Ctrl+Z)',
      'toolbar.redoTooltip': 'Redo (Ctrl+Y)',
      'toolbar.preview': 'Preview Effect',
      'toolbar.processing': 'Processing...',
      'toolbar.generatePDF': 'Generate Secure PDF',
      'toolbar.clearMarks': 'Clear Marks',
      
      // PDF Processing
      'pdf.loading': 'PDF loading successful! {{totalPages}} pages in total, you can now start selecting sensitive areas to hide',
      'pdf.currentPage': '{{current}}/{{total}}',
      'pdf.thumbnailView': 'Thumbnail View',
      'pdf.thumbnailViewPages': '({{total}} pages)',
      'pdf.page': 'Page {{number}}',
      'pdf.marks': '{{count}} marks',
      'pdf.markAreas': 'Marked areas: {{count}}',
      
      // Language Selector
      'language.selector': 'Language',
      'language.en': 'English',
      'language.zh': 'ä¸­æ–‡',
      'language.fr': 'FranÃ§ais',
      
      // Progress Messages
      'progress.rendering': 'Rendering page {{pageNum}} completed',
      'progress.processing': 'Processing page {{pageNum}}',
      'progress.generating': 'Generating PDF...',
      'progress.finalizing': 'Finalizing...',
      'progress.canvasComplete': 'Canvas screenshot security editing completed, processed {{totalPages}} pages PDF, {{marksCount}} sensitive areas',
      'progress.loadingStart': 'Starting to load PDF file...',
      'progress.readingFile': 'Reading file data...',
      'progress.parsingPdf': 'Parsing PDF structure...',
      'progress.loadingContent': 'Loading PDF content...',
      'progress.pdfLoaded': 'PDF loaded successfully, {{totalPages}} pages in total',
      'progress.renderingPage': 'Rendering page {{pageNum}}...',
      'progress.gettingDimensions': 'Getting page dimensions...',
      'progress.creatingCanvas': 'Creating canvas...',
      'progress.renderingContent': 'Rendering page content...',
      'progress.extractingImage': 'Extracting image data...',
      'progress.processingStart': 'Starting PDF processing...',
      'progress.creatingDocument': 'Creating new PDF document...',
      'progress.canvasProcessing': 'Canvas screenshot processing page {{pageNum}}...',
      'progress.renderingCanvas': 'Rendering page {{pageNum}}...',
      'progress.redactingAreas': 'Redacting {{count}} sensitive areas...',
      'progress.convertingToImage': 'Converting page {{pageNum}} to image...',
      'progress.pageError': 'Page {{pageNum}} processing error, skipping...',
      'progress.generatingFinalPdf': 'Generating final PDF file...',
      'progress.canvasCompleted': 'Canvas screenshot completed! Processed {{totalPages}} pages, {{marksCount}} sensitive areas',
      'progress.pixelateProcessing': 'Pixelate processing page {{pageNum}}...',
      'progress.pixelateAreas': 'Pixelating {{count}} sensitive areas...',
      'progress.pixelateCompleted': 'Pixelate processing completed! Processed {{totalPages}} pages, {{marksCount}} sensitive areas',
      'progress.rebuildPrep': 'Preparing PDF rebuild...',
      'progress.analyzingStructure': 'Analyzing PDF structure...',
      'progress.processingStructure': 'Processing page {{pageNum}} PDF structure...',
      'progress.removingText': 'Removing {{count}} sensitive text objects from page {{pageNum}}...',
      'progress.addingMasks': 'Adding {{count}} security masks to page {{pageNum}}...',
      'progress.structureComplete': 'Page {{pageNum}} structure rebuild completed, removed {{count}} text objects',
      'progress.noSensitiveAreas': 'Page {{pageNum}} has no sensitive areas, keeping original structure',
      'progress.cleaningMetadata': 'Cleaning PDF metadata and optimizing structure...',
      'progress.rebuildCompleted': 'PDF rebuild completed! Processed {{totalPages}} pages, {{marksCount}} sensitive areas',
      
      // Notifications
      'notification.fileLoaded': 'File loaded successfully',
      'notification.fileError': 'File loading failed',
      'notification.processingComplete': 'Processing completed successfully',
      'notification.processingError': 'Processing failed',
      'notification.markAdded': 'Mark added successfully',
      'notification.markRemoved': 'Mark removed successfully',
      
      // Common
      'common.loading': 'Loading...',
      'common.cancel': 'Cancel',
      'common.confirm': 'Confirm',
      'common.close': 'Close',
      'common.save': 'Save',
      'common.delete': 'Delete',
      'common.edit': 'Edit',
      'common.settings': 'Settings',
      'common.processError': 'File processing failed, please try again',
      'common.secureEdit': 'secure_edit',
      'common.confirmBack': 'Going back will lose current editing progress, are you sure you want to go back?',
      
      // Error Messages - Additional
      'error.pdfNotLoaded': 'PDF not loaded',
      'error.cannotGetCanvasContext': 'Unable to get Canvas context',
      'error.pdfLoadFailed': 'PDF loading failed',
      'error.invalidPdf': 'File is not a valid PDF format, please check if the file is corrupted',
      'error.missingPdf': 'PDF file data missing or corrupted',
      'error.passwordProtected': 'PDF file is password protected, please remove password protection first',
      'error.pdfProcessingError': 'PDF processing error: {{message}}',
      'error.pdfLoadFailedGeneric': 'PDF loading failed',
      'error.pageRenderFailed': 'Page rendering failed',
      'error.renderError': 'Rendering error: {{message}}',
      'error.pdfProcessFailed': 'PDF processing failed, please try again',
      'error.unsupportedMethod': 'Unsupported processing method: {{method}}',
      'error.pdfDataNotFound': 'PDF file data not found, please reload PDF',
      'error.pageSkipped': 'Skipping page {{pageNum}}: Unable to get Canvas context',
      'error.pageProcessingError': 'Error processing page {{pageNum}}',
      'error.pageNotExist': 'Page {{pageNum}} does not exist, skipping...',
      'error.textAnalysisFailed': 'Page {{pageNum}} text analysis failed, using basic masking method',
      'error.metadataCleaningFailed': 'Metadata cleaning failed',
    }
  },
  zh: {
    translation: {
      // App Header
      'app.title': 'PDFå®‰å…¨ç¼–è¾‘å™¨',
      'app.subtitle': 'æ‹–æ‹½é€‰æ‹©æ•æ„ŸåŒºåŸŸ',
      'app.back': 'è¿”å›',
      
      // File Upload
      'upload.title': 'ä¸Šä¼ PDFæ–‡ä»¶',
      'upload.description': 'å®‰å…¨åœ°éšè—æ•æ„Ÿä¿¡æ¯ï¼Œæ‰€æœ‰å¤„ç†éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆ',
      'upload.requirements.title': 'æ–‡ä»¶è¦æ±‚ä¸ä½¿ç”¨æµç¨‹',
      'upload.fileRequirements.title': 'ğŸ“„ æ–‡ä»¶è¦æ±‚',
      'upload.fileRequirements.format': 'ä»…æ”¯æŒ PDF æ ¼å¼æ–‡ä»¶',
      'upload.fileRequirements.size': 'æ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 50MB',
      'upload.fileRequirements.password': 'ä¸æ”¯æŒå¯†ç ä¿æŠ¤çš„æ–‡ä»¶',
      'upload.fileRequirements.fileName': 'æ–‡ä»¶åå»ºè®®ä½¿ç”¨å¸¸è§„å­—ç¬¦',
      'upload.usageFlow.title': 'ğŸ”„ ä½¿ç”¨æµç¨‹',
      'upload.usageFlow.step1': 'ä¸Šä¼ PDFæ–‡ä»¶ï¼ˆæ‹–æ‹½æˆ–ç‚¹å‡»é€‰æ‹©ï¼‰',
      'upload.usageFlow.step2': 'æ‹–æ‹½é¼ æ ‡åœˆé€‰æ•æ„Ÿä¿¡æ¯åŒºåŸŸ',
      'upload.usageFlow.step3': 'é¢„è§ˆæ•ˆæœï¼Œç¡®è®¤æ¶‚é»‘åŒºåŸŸ',
      'upload.usageFlow.step4': 'é€‰æ‹©å¤„ç†æ–¹æ³•ï¼Œç”Ÿæˆå®‰å…¨PDF',
      
      // FileUploader component
      'fileUploader.validation.formatError': 'ä»…æ”¯æŒPDFæ ¼å¼æ–‡ä»¶',
      'fileUploader.validation.sizeError': 'æ–‡ä»¶å¤§å°è¶…è¿‡50MBé™åˆ¶ï¼Œè¯·é€‰æ‹©è¾ƒå°çš„PDFæ–‡ä»¶',
      'fileUploader.validation.nameError': 'æ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œè¯·é‡å‘½ååé‡è¯•',
      'fileUploader.validation.failed': 'æ–‡ä»¶éªŒè¯å¤±è´¥',
      'fileUploader.validation.selectValid': 'è¯·é€‰æ‹©ç¬¦åˆè¦æ±‚çš„PDFæ–‡ä»¶',
      'fileUploader.loading.title': 'æ­£åœ¨åŠ è½½PDF...',
      'fileUploader.loading.description': 'è¯·ç¨å€™ï¼Œæ­£åœ¨è§£ææ–‡ä»¶',
      'fileUploader.remove': 'ç§»é™¤æ–‡ä»¶',
      'fileUploader.clickToReselect': 'ç‚¹å‡»é‡æ–°é€‰æ‹©',
      'fileUploader.dragDrop.title': 'æ‹–æ‹½PDFæ–‡ä»¶åˆ°æ­¤å¤„',
      'fileUploader.dragDrop.subtitle': 'æˆ–è€…',
      'fileUploader.dragDrop.clickToSelect': 'ç‚¹å‡»é€‰æ‹©æ–‡ä»¶',
      'fileUploader.maxSize': 'æœ€å¤§50MB',
      'fileUploader.pdfOnly': 'ä»…PDFæ ¼å¼',
      'fileUploader.localProcessing': 'æœ¬åœ°å¤„ç†',
      'fileUploader.privacy.description': 'æ‰€æœ‰æ–‡ä»¶å¤„ç†å‡åœ¨æ‚¨çš„è®¾å¤‡æœ¬åœ°å®Œæˆï¼Œç¡®ä¿éšç§å®‰å…¨ã€‚æˆ‘ä»¬ä¸ä¼šä¸Šä¼ æˆ–å­˜å‚¨æ‚¨çš„æ–‡ä»¶ã€‚',
      
      // Toolbar component
      'toolbar.title': 'ç¼–è¾‘è®¾ç½®',
      'toolbar.subtitle': 'é€‰æ‹©å¤„ç†æ–¹æ³•å¹¶ç”Ÿæˆå®‰å…¨PDF',
      'toolbar.methodTitle': 'å¤„ç†æ–¹æ³•',
      'toolbar.methods.canvas': 'Canvasæˆªå›¾',
      'toolbar.methods.canvasDesc': 'è½¬ä¸ºå›¾åƒï¼Œæœ€é«˜å®‰å…¨æ€§ï¼Œå®Œå…¨ä¸å¯æ¢å¤',
      'toolbar.methods.pixelate': 'åƒç´ åŒ–å¤„ç†',
      'toolbar.methods.pixelateDesc': 'åƒç´ åŒ–æ¨¡ç³Šï¼Œä¿æŒPDFç»“æ„ï¼Œå¿«é€Ÿå¤„ç†',
      'toolbar.recommended': 'æ¨è',
      'toolbar.markColor': 'æ ‡è®°é¢œè‰²',
      'toolbar.colorDescription': 'é€‰æ‹©æ ‡è®°åŒºåŸŸçš„æ˜¾ç¤ºé¢œè‰²ï¼Œä¾¿äºåŒºåˆ†ä¸åŒç±»å‹çš„æ•æ„Ÿä¿¡æ¯',
      'toolbar.colors.red': 'çº¢è‰²',
      'toolbar.colors.blue': 'è“è‰²', 
      'toolbar.colors.green': 'ç»¿è‰²',
      'toolbar.colors.yellow': 'é»„è‰²',
      'toolbar.colors.purple': 'ç´«è‰²',
      'toolbar.undo': 'æ’¤é”€',
      'toolbar.redo': 'é‡åš',
      'toolbar.undoTooltip': 'æ’¤é”€ (Ctrl+Z)',
      'toolbar.redoTooltip': 'é‡åš (Ctrl+Y)',
      'toolbar.preview': 'é¢„è§ˆæ•ˆæœ',
      'toolbar.processing': 'å¤„ç†ä¸­...',
      'toolbar.generatePDF': 'ç”Ÿæˆå®‰å…¨PDF',
      'toolbar.clearMarks': 'æ¸…é™¤æ ‡è®°',
      
      // PDF Processing
      'pdf.loading': 'PDFåŠ è½½æˆåŠŸï¼å…± {{totalPages}} é¡µï¼Œæ‚¨å¯ä»¥å¼€å§‹é€‰æ‹©éœ€è¦éšè—çš„æ•æ„ŸåŒºåŸŸ',
      'pdf.currentPage': '{{current}}/{{total}}',
      'pdf.thumbnailView': 'ç¼©ç•¥å›¾è§†å›¾',
      'pdf.thumbnailViewPages': '({{total}} é¡µ)',
      'pdf.page': 'ç¬¬ {{number}} é¡µ',
      'pdf.marks': '{{count}} ä¸ªæ ‡è®°',
      'pdf.markAreas': 'æ ‡è®°åŒºåŸŸï¼š{{count}} ä¸ª',
      
      // Language Selector
      'language.selector': 'è¯­è¨€',
      'language.en': 'English',
      'language.zh': 'ä¸­æ–‡',
      'language.fr': 'FranÃ§ais',
      
      // Progress Messages
      'progress.rendering': 'ç¬¬{{pageNum}}é¡µæ¸²æŸ“å®Œæˆ',
      'progress.processing': 'æ­£åœ¨å¤„ç†ç¬¬{{pageNum}}é¡µ',
      'progress.generating': 'æ­£åœ¨ç”ŸæˆPDF...',
      'progress.finalizing': 'æ­£åœ¨å®Œæˆ...',
      'progress.canvasComplete': 'Canvasæˆªå›¾å®‰å…¨ç¼–è¾‘å®Œæˆï¼Œå·²å¤„ç†{{totalPages}}é¡µPDFï¼Œ{{marksCount}}ä¸ªæ•æ„ŸåŒºåŸŸ',
      'progress.loadingStart': 'å¼€å§‹åŠ è½½PDFæ–‡ä»¶...',
      'progress.readingFile': 'è¯»å–æ–‡ä»¶æ•°æ®...',
      'progress.parsingPdf': 'è§£æPDFç»“æ„...',
      'progress.loadingContent': 'åŠ è½½PDFå†…å®¹...',
      'progress.pdfLoaded': 'PDFåŠ è½½å®Œæˆï¼Œå…±{{totalPages}}é¡µ',
      'progress.renderingPage': 'æ­£åœ¨æ¸²æŸ“ç¬¬{{pageNum}}é¡µ...',
      'progress.gettingDimensions': 'è·å–é¡µé¢å°ºå¯¸...',
      'progress.creatingCanvas': 'åˆ›å»ºç”»å¸ƒ...',
      'progress.renderingContent': 'æ¸²æŸ“é¡µé¢å†…å®¹...',
      'progress.extractingImage': 'æå–å›¾åƒæ•°æ®...',
      'progress.processingStart': 'å¼€å§‹å¤„ç†PDF...',
      'progress.creatingDocument': 'åˆ›å»ºæ–°PDFæ–‡æ¡£...',
      'progress.canvasProcessing': 'Canvasæˆªå›¾å¤„ç†ç¬¬{{pageNum}}é¡µ...',
      'progress.renderingCanvas': 'æ¸²æŸ“ç¬¬{{pageNum}}é¡µ...',
      'progress.redactingAreas': 'æ¶‚é»‘{{count}}ä¸ªæ•æ„ŸåŒºåŸŸ...',
      'progress.convertingToImage': 'è½¬æ¢ç¬¬{{pageNum}}é¡µä¸ºå›¾åƒ...',
      'progress.pageError': 'ç¬¬{{pageNum}}é¡µå¤„ç†å‡ºé”™ï¼Œè·³è¿‡...',
      'progress.generatingFinalPdf': 'ç”Ÿæˆæœ€ç»ˆPDFæ–‡ä»¶...',
      'progress.canvasCompleted': 'Canvasæˆªå›¾å®Œæˆï¼å…±å¤„ç†{{totalPages}}é¡µï¼Œ{{marksCount}}ä¸ªæ•æ„ŸåŒºåŸŸ',
      'progress.pixelateProcessing': 'åƒç´ åŒ–å¤„ç†ç¬¬{{pageNum}}é¡µ...',
      'progress.pixelateAreas': 'åƒç´ åŒ–{{count}}ä¸ªæ•æ„ŸåŒºåŸŸ...',
      'progress.pixelateCompleted': 'åƒç´ åŒ–å¤„ç†å®Œæˆï¼å…±å¤„ç†{{totalPages}}é¡µï¼Œ{{marksCount}}ä¸ªæ•æ„ŸåŒºåŸŸ',
      'progress.rebuildPrep': 'å‡†å¤‡PDFé‡å»º...',
      'progress.analyzingStructure': 'åˆ†æPDFç»“æ„...',
      'progress.processingStructure': 'å¤„ç†ç¬¬{{pageNum}}é¡µPDFç»“æ„...',
      'progress.removingText': 'ç§»é™¤ç¬¬{{pageNum}}é¡µçš„{{count}}ä¸ªæ•æ„Ÿæ–‡æœ¬å¯¹è±¡...',
      'progress.addingMasks': 'åœ¨ç¬¬{{pageNum}}é¡µæ·»åŠ {{count}}ä¸ªå®‰å…¨é®ç½©...',
      'progress.structureComplete': 'ç¬¬{{pageNum}}é¡µç»“æ„é‡å»ºå®Œæˆï¼Œç§»é™¤äº†{{count}}ä¸ªæ–‡æœ¬å¯¹è±¡',
      'progress.noSensitiveAreas': 'ç¬¬{{pageNum}}é¡µæ— æ•æ„ŸåŒºåŸŸï¼Œä¿æŒåŸç»“æ„',
      'progress.cleaningMetadata': 'æ¸…ç†PDFå…ƒæ•°æ®å¹¶ä¼˜åŒ–ç»“æ„...',
      'progress.rebuildCompleted': 'PDFé‡å»ºå®Œæˆï¼å…±å¤„ç†{{totalPages}}é¡µï¼Œ{{marksCount}}ä¸ªæ•æ„ŸåŒºåŸŸ',
      
      // Notifications
      'notification.fileLoaded': 'æ–‡ä»¶åŠ è½½æˆåŠŸ',
      'notification.fileError': 'æ–‡ä»¶åŠ è½½å¤±è´¥',
      'notification.processingComplete': 'å¤„ç†æˆåŠŸå®Œæˆ',
      'notification.processingError': 'å¤„ç†å¤±è´¥',
      'notification.markAdded': 'æ ‡è®°æ·»åŠ æˆåŠŸ',
      'notification.markRemoved': 'æ ‡è®°ç§»é™¤æˆåŠŸ',
      
      // Common
      'common.loading': 'åŠ è½½ä¸­...',
      'common.cancel': 'å–æ¶ˆ',
      'common.confirm': 'ç¡®è®¤',
      'common.close': 'å…³é—­',
      'common.save': 'ä¿å­˜',
      'common.delete': 'åˆ é™¤',
      'common.edit': 'ç¼–è¾‘',
      'common.settings': 'è®¾ç½®',
      
      // Error Messages - Additional
      'error.pdfNotLoaded': 'PDFæœªåŠ è½½',
      'error.cannotGetCanvasContext': 'æ— æ³•è·å–Canvasä¸Šä¸‹æ–‡',
      'error.pdfLoadFailed': 'PDFåŠ è½½å¤±è´¥',
      'error.invalidPdf': 'æ–‡ä»¶ä¸æ˜¯æœ‰æ•ˆçš„PDFæ ¼å¼ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æŸå',
      'error.missingPdf': 'PDFæ–‡ä»¶æ•°æ®ç¼ºå¤±æˆ–æŸå',
      'error.passwordProtected': 'PDFæ–‡ä»¶è¢«å¯†ç ä¿æŠ¤ï¼Œè¯·å…ˆè§£é™¤å¯†ç ä¿æŠ¤',
      'error.pdfProcessingError': 'PDFå¤„ç†é”™è¯¯: {{message}}',
      'error.pdfLoadFailedGeneric': 'PDFåŠ è½½å¤±è´¥',
      'error.pageRenderFailed': 'é¡µé¢æ¸²æŸ“å¤±è´¥',
      'error.renderError': 'æ¸²æŸ“é”™è¯¯: {{message}}',
      'error.pdfProcessFailed': 'PDFå¤„ç†å¤±è´¥ï¼Œè¯·é‡è¯•',
      'error.unsupportedMethod': 'ä¸æ”¯æŒçš„å¤„ç†æ–¹æ³•: {{method}}',
      'error.pdfDataNotFound': 'PDFæ–‡ä»¶æ•°æ®æœªæ‰¾åˆ°ï¼Œè¯·é‡æ–°åŠ è½½PDF',
      'error.pageSkipped': 'è·³è¿‡ç¬¬{{pageNum}}é¡µï¼šæ— æ³•è·å–Canvasä¸Šä¸‹æ–‡',
      'error.pageProcessingError': 'å¤„ç†ç¬¬{{pageNum}}é¡µæ—¶å‡ºé”™',
      'error.pageNotExist': 'ç¬¬{{pageNum}}é¡µä¸å­˜åœ¨ï¼Œè·³è¿‡...',
      'error.textAnalysisFailed': 'ç¬¬{{pageNum}}é¡µæ–‡æœ¬åˆ†æå¤±è´¥ï¼Œä½¿ç”¨åŸºç¡€é®ç½©æ–¹æ³•',
      'error.metadataCleaningFailed': 'å…ƒæ•°æ®æ¸…ç†å¤±è´¥'
    }
  },
  fr: {
    translation: {
      // App Header
      'app.title': 'Ã‰diteur PDF SÃ©curisÃ©',
      'app.subtitle': 'Glissez pour sÃ©lectionner les zones sensibles',
      'app.back': 'Retour',
      
      // File Upload
      'upload.title': 'Ã‰diteur PDF SÃ©curisÃ©',
      'upload.description': 'TÃ©lÃ©chargez votre fichier PDF pour commencer l\'Ã©dition',
      'upload.requirements.title': 'Exigences du fichier et flux d\'utilisation',
      'upload.fileRequirements.title': 'ğŸ“„ Exigences du fichier',
      'upload.fileRequirements.format': 'Seuls les fichiers PDF sont pris en charge',
      'upload.fileRequirements.size': 'Taille de fichier ne dÃ©passant pas 50 Mo',
      'upload.fileRequirements.password': 'Fichiers protÃ©gÃ©s par mot de passe non pris en charge',
      'upload.fileRequirements.fileName': 'Les noms de fichiers doivent utiliser des caractÃ¨res rÃ©guliers',
      'upload.usageFlow.title': 'ğŸ”„ Flux d\'utilisation',
      'upload.usageFlow.step1': 'TÃ©lÃ©charger le fichier PDF (glisser ou cliquer pour sÃ©lectionner)',
      'upload.usageFlow.step2': 'Glisser la souris pour sÃ©lectionner les zones d\'informations sensibles',
      'upload.usageFlow.step3': 'PrÃ©visualiser l\'effet, confirmer les zones caviardÃ©es',
      'upload.usageFlow.step4': 'SÃ©lectionner la mÃ©thode de traitement, gÃ©nÃ©rer le PDF sÃ©curisÃ©',
      
      // FileUploader component  
      'fileUploader.validation.formatError': 'Seuls les fichiers PDF sont pris en charge',
      'fileUploader.validation.sizeError': 'La taille du fichier dÃ©passe la limite de 50 Mo, veuillez sÃ©lectionner un fichier PDF plus petit',
      'fileUploader.validation.nameError': 'Le nom du fichier contient des caractÃ¨res spÃ©ciaux, veuillez renommer et rÃ©essayer',
      'fileUploader.validation.failed': 'Ã‰chec de la validation du fichier',
      'fileUploader.validation.selectValid': 'Veuillez sÃ©lectionner un fichier PDF valide',
      'fileUploader.loading.title': 'Chargement du PDF...',
      'fileUploader.loading.description': 'Veuillez patienter, analyse du fichier en cours',
      'fileUploader.remove': 'Supprimer le fichier',
      'fileUploader.clickToReselect': 'Cliquer pour resÃ©lectionner',
      'fileUploader.dragDrop.title': 'Glisser le fichier PDF ici',
      'fileUploader.dragDrop.subtitle': 'ou',
      'fileUploader.dragDrop.clickToSelect': 'cliquer pour sÃ©lectionner le fichier',
      'fileUploader.maxSize': 'Max 50 Mo',
      'fileUploader.pdfOnly': 'PDF uniquement',
      'fileUploader.localProcessing': 'Traitement local',
      'fileUploader.privacy.description': 'Tout le traitement de fichier est effectuÃ© localement sur votre appareil, garantissant la confidentialitÃ© et la sÃ©curitÃ©. Nous ne tÃ©lÃ©chargeons ni ne stockons vos fichiers.',
      
      // Toolbar component
      'toolbar.title': 'ParamÃ¨tres d\'Ã©dition',
      'toolbar.subtitle': 'SÃ©lectionner la mÃ©thode de traitement et gÃ©nÃ©rer le PDF sÃ©curisÃ©',
      'toolbar.methodTitle': 'MÃ©thode de traitement',
      'toolbar.methods.canvas': 'Capture Canvas',
      'toolbar.methods.canvasDesc': 'Convertir en image, sÃ©curitÃ© maximale, complÃ¨tement irrÃ©cupÃ©rable',
      'toolbar.methods.pixelate': 'Traitement pixelisÃ©',
      'toolbar.methods.pixelateDesc': 'Flou pixelisÃ©, maintenir la structure PDF, traitement rapide',
      'toolbar.recommended': 'RecommandÃ©',
      'toolbar.markColor': 'Couleur de marque',
      'toolbar.colorDescription': 'SÃ©lectionner la couleur d\'affichage pour les zones marquÃ©es, pratique pour distinguer diffÃ©rents types d\'informations sensibles',
      'toolbar.colors.red': 'Rouge',
      'toolbar.colors.blue': 'Bleu', 
      'toolbar.colors.green': 'Vert',
      'toolbar.colors.yellow': 'Jaune',
      'toolbar.colors.purple': 'Violet',
      'toolbar.undo': 'Annuler',
      'toolbar.redo': 'Refaire',
      'toolbar.undoTooltip': 'Annuler (Ctrl+Z)',
      'toolbar.redoTooltip': 'Refaire (Ctrl+Y)',
      'toolbar.preview': 'PrÃ©visualiser l\'effet',
      'toolbar.processing': 'Traitement...',
      'toolbar.generatePDF': 'GÃ©nÃ©rer PDF sÃ©curisÃ©',
      'toolbar.clearMarks': 'Effacer les marques',
      
      // PDF Processing
      'pdf.loading': 'Chargement PDF rÃ©ussi! {{totalPages}} pages au total, vous pouvez maintenant commencer Ã  sÃ©lectionner les zones sensibles Ã  masquer',
      'pdf.currentPage': '{{current}}/{{total}}',
      'pdf.thumbnailView': 'Vue Miniature',
      'pdf.thumbnailViewPages': '({{total}} pages)',
      'pdf.page': 'Page {{number}}',
      'pdf.marks': '{{count}} marques',
      'pdf.markAreas': 'Zones marquÃ©es : {{count}}',
      
      // Language Selector
      'language.selector': 'Langue',
      'language.en': 'English',
      'language.zh': 'ä¸­æ–‡',
      'language.fr': 'FranÃ§ais',
      
      // Progress Messages
      'progress.rendering': 'Rendu de la page {{pageNum}} terminÃ©',
      'progress.processing': 'Traitement de la page {{pageNum}} en cours',
      'progress.generating': 'GÃ©nÃ©ration du PDF...',
      'progress.finalizing': 'Finalisation...',
      'progress.canvasComplete': 'Ã‰dition de sÃ©curitÃ© par capture Canvas terminÃ©e, traitÃ© {{totalPages}} pages PDF, {{marksCount}} zones sensibles',
      'progress.loadingStart': 'DÃ©but du chargement du fichier PDF...',
      'progress.readingFile': 'Lecture des donnÃ©es du fichier...',
      'progress.parsingPdf': 'Analyse de la structure PDF...',
      'progress.loadingContent': 'Chargement du contenu PDF...',
      'progress.pdfLoaded': 'PDF chargÃ© avec succÃ¨s, {{totalPages}} pages au total',
      'progress.renderingPage': 'Rendu de la page {{pageNum}} en cours...',
      'progress.gettingDimensions': 'Obtention des dimensions de la page...',
      'progress.creatingCanvas': 'CrÃ©ation du canvas...',
      'progress.renderingContent': 'Rendu du contenu de la page...',
      'progress.extractingImage': 'Extraction des donnÃ©es d\'image...',
      'progress.processingStart': 'DÃ©but du traitement PDF...',
      'progress.creatingDocument': 'CrÃ©ation du nouveau document PDF...',
      'progress.canvasProcessing': 'Traitement par capture Canvas de la page {{pageNum}}...',
      'progress.renderingCanvas': 'Rendu de la page {{pageNum}}...',
      'progress.redactingAreas': 'Caviarder {{count}} zones sensibles...',
      'progress.convertingToImage': 'Conversion de la page {{pageNum}} en image...',
      'progress.pageError': 'Erreur de traitement de la page {{pageNum}}, ignorÃ©e...',
      'progress.generatingFinalPdf': 'GÃ©nÃ©ration du fichier PDF final...',
      'progress.canvasCompleted': 'Capture Canvas terminÃ©e ! TraitÃ© {{totalPages}} pages, {{marksCount}} zones sensibles',
      'progress.pixelateProcessing': 'Traitement pixelisÃ© de la page {{pageNum}}...',
      'progress.pixelateAreas': 'Pixelisation de {{count}} zones sensibles...',
      'progress.pixelateCompleted': 'Traitement pixelisÃ© terminÃ© ! TraitÃ© {{totalPages}} pages, {{marksCount}} zones sensibles',
      'progress.rebuildPrep': 'PrÃ©paration de la reconstruction PDF...',
      'progress.analyzingStructure': 'Analyse de la structure PDF...',
      'progress.processingStructure': 'Traitement de la structure PDF de la page {{pageNum}}...',
      'progress.removingText': 'Suppression de {{count}} objets texte sensibles de la page {{pageNum}}...',
      'progress.addingMasks': 'Ajout de {{count}} masques de sÃ©curitÃ© Ã  la page {{pageNum}}...',
      'progress.structureComplete': 'Reconstruction de la structure de la page {{pageNum}} terminÃ©e, {{count}} objets texte supprimÃ©s',
      'progress.noSensitiveAreas': 'La page {{pageNum}} n\'a pas de zones sensibles, conservation de la structure originale',
      'progress.cleaningMetadata': 'Nettoyage des mÃ©tadonnÃ©es PDF et optimisation de la structure...',
      'progress.rebuildCompleted': 'Reconstruction PDF terminÃ©e ! TraitÃ© {{totalPages}} pages, {{marksCount}} zones sensibles',
      
      // Notifications
      'notification.fileLoaded': 'Fichier chargÃ© avec succÃ¨s',
      'notification.fileError': 'Ã‰chec du chargement du fichier',
      'notification.processingComplete': 'Traitement terminÃ© avec succÃ¨s',
      'notification.processingError': 'Ã‰chec du traitement',
      'notification.markAdded': 'Marque ajoutÃ©e avec succÃ¨s',
      'notification.markRemoved': 'Marque supprimÃ©e avec succÃ¨s',
      
      // Common
      'common.loading': 'Chargement...',
      'common.cancel': 'Annuler',
      'common.confirm': 'Confirmer',
      'common.close': 'Fermer',
      'common.save': 'Enregistrer',
      'common.delete': 'Supprimer',
      'common.edit': 'Modifier',
      'common.settings': 'ParamÃ¨tres',
      'common.processError': 'Ã‰chec du traitement du fichier, veuillez rÃ©essayer',
      'common.secureEdit': 'Ã©dition_sÃ©curisÃ©e',
      'common.confirmBack': 'Retourner fera perdre le progrÃ¨s d\'Ã©dition actuel, Ãªtes-vous sÃ»r de vouloir retourner?',
      
      // Error Messages - Additional
      'error.pdfNotLoaded': 'PDF non chargÃ©',
      'error.cannotGetCanvasContext': 'Impossible d\'obtenir le contexte Canvas',
      'error.pdfLoadFailed': 'Ã‰chec du chargement PDF',
      'error.invalidPdf': 'Le fichier n\'est pas un format PDF valide, veuillez vÃ©rifier si le fichier est corrompu',
      'error.missingPdf': 'DonnÃ©es du fichier PDF manquantes ou corrompues',
      'error.passwordProtected': 'Le fichier PDF est protÃ©gÃ© par mot de passe, veuillez d\'abord supprimer la protection par mot de passe',
      'error.pdfProcessingError': 'Erreur de traitement PDF: {{message}}',
      'error.pdfLoadFailedGeneric': 'Ã‰chec du chargement PDF',
      'error.pageRenderFailed': 'Ã‰chec du rendu de page',
      'error.renderError': 'Erreur de rendu: {{message}}',
      'error.pdfProcessFailed': 'Ã‰chec du traitement PDF, veuillez rÃ©essayer',
      'error.unsupportedMethod': 'MÃ©thode de traitement non supportÃ©e: {{method}}',
      'error.pdfDataNotFound': 'DonnÃ©es du fichier PDF non trouvÃ©es, veuillez recharger le PDF',
      'error.pageSkipped': 'Ignorer la page {{pageNum}}: Impossible d\'obtenir le contexte Canvas',
      'error.pageProcessingError': 'Erreur lors du traitement de la page {{pageNum}}',
      'error.pageNotExist': 'La page {{pageNum}} n\'existe pas, ignorÃ©e...',
      'error.textAnalysisFailed': 'Analyse de texte de la page {{pageNum}} Ã©chouÃ©e, utilisation de la mÃ©thode de masquage de base',
      'error.metadataCleaningFailed': 'Ã‰chec du nettoyage des mÃ©tadonnÃ©es'
    }
  }
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'en',
    supportedLngs: ['en', 'zh', 'fr'], 
    nonExplicitSupportedLngs: true, 
    debug: false, // å…³é—­è°ƒè¯•æ¨¡å¼æå‡æ€§èƒ½
    
    interpolation: {
      escapeValue: false,
    },
    
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],
      lookupLocalStorage: 'i18nextLng',
      lookupFromPathIndex: 0,
      lookupFromSubdomainIndex: 0,
      caches: ['localStorage'],
      excludeCacheFor: ['cimode'], // ä¸ç¼“å­˜å¼€å‘æ¨¡å¼
      // ä¼˜åŒ–æ£€æµ‹ç®—æ³•
      convertDetectedLanguage: (lng: string) => {
        // å°†å¸¸è§çš„è¯­è¨€ä»£ç æ ‡å‡†åŒ–
        const langMap: { [key: string]: string } = {
          'zh-CN': 'zh',
          'zh-Hans': 'zh',
          'zh-Hant': 'zh',
          'zh-TW': 'zh',
          'zh-HK': 'zh',
          'en-US': 'en',
          'en-GB': 'en',
          'fr-FR': 'fr',
          'fr-CA': 'fr'
        };
        
        return langMap[lng] || lng.split('-')[0];
      }
    },
  });

export default i18n;